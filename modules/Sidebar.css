
/* Topbar Buttons */
    @media not (-moz-bool-pref: "neo-theme-window-buttons-disabled") {
        @media not (-moz-bool-pref: "zen.view.experimental-no-window-controls") {
            .titlebar-button {
                min-height: 13px !important;
                min-width: 13px !important;
                padding: 0px !important;
                height: 13px !important;
                width: 13px !important;

                align-self: center;

                border-radius: 50px;
                margin: auto 3px !important;
                background-color: rgba(200, 200, 200, 0.3) !important;
                transition: all 200ms ease-in-out;
            }

            .titlebar-button>image {
                visibility: hidden !important;
            }

            .titlebar-buttonbox {
                align-content: center !important;
                justify-content: center !important;
                margin-right: calc(var(--zen-element-separation) / 2) !important;
            }

            .titlebar-buttonbox-container {
                align-self: center !important;
                justify-self: center !important;
                justify-content: center !important;
                align-content: center !important;
                margin-top: auto !important;
                margin-bottom: auto !important;
                padding-bottom: auto !important;
            }

            .titlebar-button:hover {
                min-height: 20px !important;

                &.titlebar-min:hover {
                    background-color: color-mix(in srgb, var(--zen-primary-color) 90%, white) !important;
                    box-shadow: 0 0px 8px color-mix(in srgb, var(--zen-primary-color) 90%, white) !important;
                }

                &.titlebar-restore:hover {
                    background-color: color-mix(in srgb, var(--zen-primary-color) 60%, white) !important;
                    box-shadow: 0 0px 8px color-mix(in srgb, var(--zen-primary-color) 60%, white) !important;
                }

                &.titlebar-max:hover {
                    background-color: color-mix(in srgb, var(--zen-primary-color) 60%, white) !important;
                    box-shadow: 0 0px 8px color-mix(in srgb, var(--zen-primary-color) 60%, white) !important;
                }

                &.titlebar-close:hover {
                    background-color: color-mix(in srgb, var(--zen-primary-color) 20%, rgb(255, 90, 100)) !important;
                    box-shadow: 0 0px 8px color-mix(in srgb, var(--zen-primary-color) 20%, rgb(255, 90, 100)) !important;
                }
            }

            @media (-moz-pref("neo-theme-window-buttons-colorful-enabled")) {
                .titlebar-min {
                    background-color: color-mix(in srgb, var(--zen-primary-color) 90%, white) !important;
                    box-shadow: 0 0px 4px color-mix(in srgb, var(--zen-primary-color) 90%, white) !important;
                }

                .titlebar-restore {
                    background-color: color-mix(in srgb, var(--zen-primary-color) 60%, white) !important;
                    box-shadow: 0 0px 4px color-mix(in srgb, var(--zen-primary-color) 60%, white) !important;
                }

                .titlebar-max {
                    background-color: color-mix(in srgb, var(--zen-primary-color) 60%, white) !important;
                    box-shadow: 0 0px 4px color-mix(in srgb, var(--zen-primary-color) 60%, white) !important;
                }

                .titlebar-close {
                    background-color: color-mix(in srgb, var(--zen-primary-color) 20%, rgb(255, 90, 100)) !important;
                    box-shadow: 0 0px 4px color-mix(in srgb, var(--zen-primary-color) 20%, rgb(255, 90, 100)) !important;
                }
            }
        }
    }


    @media not (-moz-bool-pref: "neo-theme-window-buttons-disabled") {
        @media not (-moz-bool-pref: "zen.view.experimental-no-window-controls") {
            @media (-moz-bool-pref: "zen.view.experimental-force-window-controls-left") {
                .titlebar-buttonbox-container {
                    order: -1 !important;
                }

                @media (-moz-bool-pref: "neo-theme-window-buttons-inverse") {
                    :root[zen-single-toolbar="true"] {
                        .titlebar-buttonbox-container {
                            order: 9999 !important;
                        }
                    }
                }
            }

            @media not (-moz-bool-pref: "zen.view.experimental-force-window-controls-left") {
                @media not (-moz-bool-pref: "neo-theme-window-buttons-inverse") {
                    :root[zen-single-toolbar="true"] {
                        .titlebar-buttonbox-container {
                            order: -1 !important;
                        }
                    }
                }
            }

            @media -moz-pref("zen.tabs.vertical") {
                :root:not([zen-single-toolbar="true"]):not([zen-right-side="true"])[zen-window-buttons-reversed="true"]:not([zen-sidebar-expanded="true"]):not([zen-compact-mode="true"]) {
                    .titlebar-buttonbox {
                        left: calc(var(--zen-toolbox-padding) * -1 / 2 - 1.5px) !important;
                    }
                }

                :root:not([zen-single-toolbar="true"])[zen-right-side="true"]:not([zen-window-buttons-reversed="true"]):not([zen-sidebar-expanded="true"]):not([zen-compact-mode="true"]) {
                    .titlebar-buttonbox {
                        margin-right: calc(var(--zen-element-separation) / 2 - 1px) !important;
                    }
                }
            }
        }
    }
 
 /* --- Compact Sidebar --- */
:root[zen-compact-mode="true"] {
  .browserSidebarContainer {
    border-radius: 0 0 var(--zen-element-separation) var(--zen-element-separation) !important;
  }
}
  #navigator-toolbox:not([animate='true']) #titlebar::before {
    content: '';
    position: absolute;
    pointer-events: none;
    z-index: -1;
    border-radius: 15px !important;
    background: transparent !important;
  }
  
:root[zen-compact-mode="true"]:not([customizing]):not([inDOMFullscreen="true"]) {
  @media -moz-pref("zen.view.compact.hide-tabbar") or -moz-pref("zen.view.use-single-toolbar") {
    #navigator-toolbox:not([animate="true"]) #titlebar::before {
      border-radius: 15px !important;
      background: light-dark(rgba(30, 30, 30, 0.7), rgba(0, 0, 0, 0.7)) !important;
      box-shadow: 0 1px 3px light-dark(rgba(255, 255, 255, 0.3), rgba(0, 0, 0, 0.3)) !important;
      backdrop-filter: blur(10px) !important;
      content: "";
      position: absolute;
      pointer-events: none;
      z-index: -1;
    }

    #navigator-toolbox:not([animate="true"]) #titlebar::after {
      content: "";
      position: absolute;
      background: light-dark(rgba(30, 30, 30, 0.7), rgba(0, 0, 0, 0.8)) !important;
      box-shadow: 0 1px 3px light-dark(rgba(255, 255, 255, 0.3), rgba(0, 0, 0, 0.3)) !important;
      backdrop-filter: blur(10px) !important;
      pointer-events: none;
      z-index: 0;
    }
  }
}

:root[zen-compact-mode="true"]:not([customizing]):not([inDOMFullscreen="true"]) {
  @media -moz-pref("zen.view.compact.hide-toolbar") {
    &:not([zen-single-toolbar="true"]) {
      & #zen-appcontent-navbar-wrapper {
        & #zen-appcontent-navbar-container {
          top: calc(var(--zen-element-separation) / 1.4) !important;
          left: calc(var(--zen-element-separation) / 0.999) !important;
          height: calc(100% - (var(--zen-element-separation) * 2.4)) !important;
          background: light-dark(rgba(30, 30, 30, 0.7), rgba(0, 0, 0, 0.8)) !important;
          box-shadow: 0 1px 3px light-dark(rgba(255, 255, 255, 0.3), rgba(0, 0, 0, 0.3)) !important;
          border-radius: 15px !important;
          scale: 1 !important;
        }
      }
    }
  }
}  
    
  body:has([zen-compact-mode="true"]) #titlebar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    backdrop-filter: blur(10px) !important;
    z-index: -1;
    isolation: isolate;
  }

  body:has([zen-compact-mode="true"]) .zen-toolbar-background {
    opacity: 0;
  }

  
    
/* Hides Top Toolbar (single toolbar) */
  :root[zen-single-toolbar="true"] #zen-appcontent-navbar-wrapper {
    max-height: var(--zen-element-separation) !important;
    margin-top: 0px;
  }

 .zen-current-workspace-indicator {
  display: none !important;
}


/* PanelUI */
#appMenu-new-tab-button2,
#appMenu-new-window-button2,
#appMenu-new-private-window-button2,
#appMenu-new-private-window-button2 + toolbarseparator

{display: none !important;}


@-moz-document url-prefix("chrome:") {
  /* ------------------------- GENERAL ZEN UI ------------------------- */
  /*Web View border extra rounded*/
  .browserContainer {
  background: linear-gradient(
    90deg,
    transparent 0%,
    transparent 100%
  );
}}

  :root {
    --attention-dot-color: transparent !important; /* remove attention dot */
    --zen-themed-toolbar-bg-transparent: transparent !important; /* fix for transparency */
  }

/* === BETTER CUSTOMIZE TOOLBAR === */
#customization-container {
  position: absolute;
  z-index: 1;
  bottom: 10px;
  right: 10px;
  height: 80%;
  width: 70%;
  border-radius: 12px;
  padding: 10px;
  background: light-dark(rgba(255,255,255,0.32),rgba(0,0,0,0.3)) !important;
}

/* Fix color text */
@media (-moz-platform: linux) {
  :root {
    --sidebar-text-color: rgba(255, 255, 255, 0.8) !important;
  }
}

[zen-should-be-dark-mode="false"] #browser {
  --sidebar-text-color: light-dark(rgb(249, 249, 250), rgb(249, 249, 250)) !important;
}

.tab-label,
toolbarbutton {
  color: var(--sidebar-text-color) !important;
}

/* Bleeding corner */
:root[zen-single-toolbar="true"] {
  html:not([sizemode="fullscreen"]) {

    .browserStack,
    browser {
      clip-path: inset(0 round var(--zen-native-inner-radius));
    }
  }
}

/* Performance optimizations */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
.tabbrowser-tab *,
#nav-bar toolbarbutton *,
#PersonalToolbar toolbarbutton *,
#urlbar *,
#searchbar *,
menupopup *,
menuitem *,
#sidebar-box *,
#downloads-notification-anchor * {
  backface-visibility: hidden;
}
.zen-floating-urlbar,
.zen-floating-status-bar {
  transform: translateZ(0);
  will-change: transform, opacity;
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.2s ease-out;
  contain: layout style paint;
}

/* Hide double audio button */
.button-background {
  display: none !important;
}

/* Window controls shadowing fix by @taroj1205 */
#zen-sidebar-splitter {
  opacity: 0 !important;
  border: none !important;
  min-width: var(--zen-toolbox-padding) !important;
  max-width: var(--zen-toolbox-padding) !important;
}

&:has(#navigator-toolbox:hover) #zen-sidebar-splitter,
#zen-sidebar-splitter:hover,
#zen-sidebar-splitter:hover:active {
  width: var(--zen-toolbox-padding) !important;
}

#tabbrowser-tabpanels[zen-split-view="true"] .browserSidebarContainer.deck-selected {
  outline: 0px solid color-mix(in srgb, var(--zen-primary-color) 50%, transparent) !important;
}

/* Drop shadow */
& #tabbrowser-tabbox #tabbrowser-tabpanels .browserSidebarContainer {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.0001), 0 6px 20px rgba(0, 0, 0, 0.0001) !important;
  --uc-tweak-rounded-corners-shadow-color: #141515 !important;
}

/* Hides the name of the extension on tabs loaded from the extension */
#urlbar #identity-box.extensionPage #identity-icon-label {
  display: none !important;
}

/* Fix inactive and unload opacity tab */
.tab-icon-image {
  @media -moz-pref("browser.tabs.fadeOutExplicitlyUnloadedTabs") {
    &[pending][discarded] {
      opacity: unset !important;
      transition-property: filter, opacity;
      transition-duration: 1s;
    }
  }
}

/* Hide attention icon (green dot) under tab icons */
#navigator-toolbox {

  .tabbrowser-tab:is([image], [pinned])>.tab-stack>.tab-content[attention]:not([selected]),
  .tabbrowser-tab>.tab-stack>.tab-content[pinned][titlechanged]:not([selected]) {
    background-image: none !important;
  }

  .tabbrowser-tab>.tab-stack>.tab-content[titlechanged]:not([selected="true"]) {
    background-image: none !important;
  }
}}
